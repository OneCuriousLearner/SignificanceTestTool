# 模型对比分析工具 - 使用说明

## 🎯 快速使用

现在你可以直接在 `quick_analysis.py` 文件中修改配置参数，无需命令行输入！

## 📝 配置参数说明

### 1. 基本配置

```python
# CSV文件路径
CSV_FILE_PATH = "merged_result-1.csv"  # 修改为你的CSV文件路径

# 基线模型字段名（可选）
BASELINE_MODEL = "overall_score_official-0916"  # 或 None

# 参评模型字段名列表
SCORE_COLUMNS = [
    "overall_score-0916",
    "overall_score-0928"
]  # 或 None（自动检测）

# 模型名称列表
MODEL_NAMES = [
    "模型-0916",
    "模型-0928"
]  # 或 None（自动提取）

# 统计检验类型
TEST_TYPE = 'wilcoxon'  # 'wilcoxon', 'ttest', 'mannwhitney'

# 显著性水平
ALPHA = 0.05

# 分数字段检测模式
SCORE_PATTERN = "overall_score"  # 用于自动检测
```

### 2. 使用方式

#### 方式1: 手动指定字段（推荐）
```python
SCORE_COLUMNS = [
    "分_模型A",
    "分_模型B", 
    "分_模型C"
]
MODEL_NAMES = [
    "模型A",
    "模型B",
    "模型C"
]
```

#### 方式2: 自动检测字段
```python
SCORE_COLUMNS = None  # 自动检测
MODEL_NAMES = None    # 自动提取
SCORE_PATTERN = "分_"  # 检测包含"分_"的字段
```

## 🔧 配置示例

### 示例1: 基本使用
```python
CSV_FILE_PATH = "your_data.csv"
BASELINE_MODEL = None
SCORE_COLUMNS = None  # 自动检测
MODEL_NAMES = None
TEST_TYPE = 'wilcoxon'
ALPHA = 0.05
SCORE_PATTERN = "分_"
```

### 示例2: 与基线模型对比
```python
CSV_FILE_PATH = "your_data.csv"
BASELINE_MODEL = "分_基线模型"
SCORE_COLUMNS = ["分_模型A", "分_模型B", "分_模型C"]
MODEL_NAMES = ["模型A", "模型B", "模型C"]
TEST_TYPE = 'wilcoxon'
ALPHA = 0.05
```

### 示例3: 使用不同统计检验
```python
CSV_FILE_PATH = "your_data.csv"
BASELINE_MODEL = None
SCORE_COLUMNS = None
MODEL_NAMES = None
TEST_TYPE = 'ttest'  # 配对t检验
ALPHA = 0.01  # 更严格的显著性水平
```

## 🚀 运行方法

1. **修改配置参数**: 在 `quick_analysis.py` 文件中修改上述参数
2. **运行脚本**: `python3 quick_analysis.py`
3. **查看结果**: 脚本会自动生成分析报告和可视化图表

## 📊 输出结果

### 1. 控制台输出
- 数据加载信息
- 基本统计信息
- 两两模型对比结果
- 基线模型对比结果（如果指定）

### 2. 可视化图表
- 箱线图：显示得分分布
- 直方图：显示得分密度
- 条形图：对比平均得分
- 相关性热力图：显示模型间相关性

### 3. 保存文件
- 分析图表：`{文件名}_analysis.png`
- 详细报告：控制台输出

## ⚠️ 注意事项

### 1. 字段名称
- 确保CSV文件中存在指定的字段名
- 字段名区分大小写
- 建议使用有意义的字段名

### 2. 数据格式
- 分数字段应为数值类型
- 支持缺失值（会自动清理）
- 建议样本量不少于30个

### 3. 统计检验选择
- **Wilcoxon符号秩检验**（推荐）：非参数检验，对数据分布要求低
- **配对t检验**：需要数据近似正态分布
- **Mann-Whitney U检验**：适用于独立样本

## 🔍 故障排除

### 1. 未检测到分数字段
```python
# 解决方案1: 手动指定字段
SCORE_COLUMNS = ["字段1", "字段2", "字段3"]

# 解决方案2: 修改检测模式
SCORE_PATTERN = "score"  # 检测包含"score"的字段
```

### 2. 基线模型不存在
```python
# 检查基线模型字段名是否正确
BASELINE_MODEL = "正确的字段名"  # 或 None
```

### 3. 数据加载失败
```python
# 检查文件路径和编码
CSV_FILE_PATH = "正确的文件路径"
# 如果编码问题，可以修改 model_comparison_tool.py 中的编码设置
```

## 📈 实际使用案例

### 案例1: 对比两个模型
```python
CSV_FILE_PATH = "model_comparison.csv"
BASELINE_MODEL = None
SCORE_COLUMNS = ["分_模型A", "分_模型B"]
MODEL_NAMES = ["模型A", "模型B"]
```

### 案例2: 与基线模型对比
```python
CSV_FILE_PATH = "model_comparison.csv"
BASELINE_MODEL = "分_基线模型"
SCORE_COLUMNS = ["分_新模型1", "分_新模型2"]
MODEL_NAMES = ["新模型1", "新模型2"]
```

### 案例3: 多模型对比
```python
CSV_FILE_PATH = "model_comparison.csv"
BASELINE_MODEL = None
SCORE_COLUMNS = None  # 自动检测所有分数字段
MODEL_NAMES = None
```

## 🎉 总结

现在你可以：
1. ✅ **直接修改配置参数** - 无需命令行输入
2. ✅ **灵活设置字段** - 支持手动指定或自动检测
3. ✅ **基线模型对比** - 与指定基线模型进行对比
4. ✅ **多种统计检验** - 支持Wilcoxon、t检验、Mann-Whitney U检验
5. ✅ **可视化分析** - 自动生成分析图表
6. ✅ **详细报告** - 完整的统计分析结果

只需要修改 `quick_analysis.py` 文件中的配置参数，然后运行 `python3 quick_analysis.py` 即可！
